"use strict";var url="http://studenter.miun.se/~grsa1500/dt173g/moment5/part1/webservice.php/courses";function loadCourseList(){fetch(url).then(function(e){return e.json()}).then(function(e){var n="";e.forEach(function(e){n+="<tr>\n                  <td>".concat(e.name,"</td>\n                  <td>").concat(e.code,"</td>\n                  <td>").concat(e.progression,"</td>\n                  <td><a href='").concat(e.syllabus,"' title='Kursplan för ").concat(e.code,'\' target=\'_blank\'><i class="fas fa-link"></i>  Kursplan </a></td>\n                  <td class="center"><a onclick="myFunction(event)" title=\'Redigera ').concat(e.code,"' target='_blank'><i id=\"").concat(e.id,'" class="fas fa-cog"></i></a> / <a class="delete" onclick="deleteCourse(event)"  title=\'Ta bort  ').concat(e.code,"' target='_blank'> <i id=\"").concat(e.id,'" class="fas fa-trash-alt"></i></a></td>\n              </tr>')}),document.getElementById("courseList").innerHTML=n})}function addCourse(){var e=document.getElementById("code").value,n=document.getElementById("name").value,t=document.getElementById("progression").value,o=document.getElementById("syllabus").value,a=JSON.stringify({code:e,name:n,progression:t,syllabus:o});fetch(url,{method:"POST",mode:"cors",body:a}).then(function(e){return e.json()}).then(function(e){return location.reload(!0)})}function myFunction(e){document.getElementById("modalspace");var n=document.getElementById("myModal"),t=document.getElementById("innermodal");n.style.display="flex";var o=e.target.id;console.log(o),document.getElementsByClassName("close")[0].onclick=function(){n.style.display="none"},window.onclick=function(e){e.target==n&&(n.style.display="none")},fetch(url+"/"+o).then(function(e){return e.json()}).then(function(e){e.forEach(function(e){var n=e.name,o=e.code,a=e.syllabus,l=e.progression;t.innerHTML='<section>\n    <h2><i class="fa fa-cog"></i> Ändra kurs</h2>\n  \n   \n    <label >\n        Kursnamn: <br>\n        <input type="text" name="nameedit" id="nameedit" value="'.concat(n,'" required/>\n    </label>\n     <label>\n        Kurskod: <br>\n        <input type="text" name="codeedit" id="codeedit" value="').concat(o,'" required/>\n    </label>\n    <label>\n        Progression: <br>\n        <select id="progressionedit">\n            \n\n        <option value="A">A</option>\n        <option value="B">B</option>\n        <option value="C">C</option>\n\n      </select>\n    </label>\n    <label >\n        Kursplan: <br>\n        <input type="text" name="syllabusedit" id="syllabusedit" value="').concat(a,'" required/>\n    </label>\n    <input type="submit" value="Ändra" onclick="editCourse(').concat(e.id,')"  id="editbutton" class="btn btn-blue">\n</section>'),document.getElementById("progressionedit").value=l})})}function deleteCourse(e){var n=e.target.id,t=url+"/"+n;console.log(t),fetch(t,{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){return location.reload(!0)})}function editCourse(e){console.log(e);var n=document.getElementById("codeedit").value,t=document.getElementById("nameedit").value,o=document.getElementById("progressionedit").value,a=document.getElementById("syllabusedit").value;console.log(n,t,o,a);var l=JSON.stringify({code:n,name:t,progression:o,syllabus:a,id:e});console.log(l),fetch(url,{method:"PUT",mode:"cors",body:l}).then(function(e){return e.json()}).then(function(e){return location.reload(!0)})}document.getElementById("submitbutton").addEventListener("click",addCourse),window.onload=loadCourseList;
//# sourceMappingURL=main.js.map

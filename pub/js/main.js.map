{"version":3,"sources":["js/main.js"],"names":["url","loadCourseList","fetch","then","res","json","data","output","forEach","course","concat","name","code","progression","syllabus","id","document","getElementById","innerHTML","addCourse","value","jsonStr","JSON","stringify","method","mode","body","location","reload","myFunction","event","modal","innermodal","style","display","target","console","log","getElementsByClassName","onclick","window","deleteCourse","deleteUrl","editCourse","addEventListener","onload"],"mappings":"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","file":"main.js","sourcesContent":["\"use strict\";\r\n\r\nconst url = \"http://studenter.miun.se/~grsa1500/dt173g/moment5/part1/webservice.php/courses\";\r\ndocument.getElementById(\"submitbutton\").addEventListener(\"click\", addCourse);\r\n\r\nwindow.onload = loadCourseList;\r\n\r\n\r\nfunction loadCourseList() {\r\n \r\n  fetch(url)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n          let output = \"\";    \r\n\r\n          data.forEach(function (course) {\r\n              output += `<tr>\r\n                  <td>${course.name}</td>\r\n                  <td>${course.code}</td>\r\n                  <td>${course.progression}</td>\r\n                  <td><a href='${course.syllabus}' title='Kursplan för ${course.code}' target='_blank'><i class=\"fas fa-link\"></i>  Kursplan </a></td>\r\n                  <td class=\"center\"><a onclick=\"myFunction(event)\" title='Redigera ${course.code}' target='_blank'><i id=\"${course.id}\" class=\"fas fa-cog\"></i></a> / <a class=\"delete\" onclick=\"deleteCourse(event)\"  title='Ta bort  ${course.code}' target='_blank'> <i id=\"${course.id}\" class=\"fas fa-trash-alt\"></i></a></td>\r\n              </tr>`;\r\n          })\r\n          document.getElementById(\"courseList\").innerHTML = output;\r\n      })\r\n}\r\n\r\n//Adding a course\r\nfunction addCourse() {\r\n    \r\n    let code = document.getElementById(\"code\").value;\r\n    let name = document.getElementById(\"name\").value;\r\n    let progression = document.getElementById(\"progression\").value;\r\n    let syllabus = document.getElementById(\"syllabus\").value;\r\n\r\n   \r\n\r\n        let jsonStr = JSON.stringify({\r\n            \"code\": code,\r\n            \"name\": name,\r\n            \"progression\": progression,\r\n            \"syllabus\": syllabus\r\n        });\r\n\r\n\r\n\r\n        fetch(url, {\r\n            method: 'POST',\r\n            mode: 'cors',\r\n           \r\n            body: jsonStr\r\n        }).then((res) => res.json())\r\n            .then((data) => location.reload(true))\r\n           \r\n    }\r\n\r\n\r\n\r\n    function myFunction(event) {\r\n        let space = document.getElementById('modalspace');\r\n        var modal = document.getElementById(\"myModal\");\r\n        var innermodal = document.getElementById(\"innermodal\");\r\n \r\n\r\n        modal.style.display = \"flex\";\r\n       \r\n        let id = event.target.id;\r\n\r\n        console.log(id);\r\n\r\n        \r\n    var span = document.getElementsByClassName(\"close\")[0];\r\n\r\n\r\n    span.onclick = function() {\r\n      modal.style.display = \"none\";\r\n    }\r\n    \r\n\r\n    window.onclick = function(event) {\r\n      if (event.target == modal) {\r\n        modal.style.display = \"none\";\r\n      }\r\n    }\r\n\r\n    let oneUrl = url + '/' + id;\r\n\r\n    fetch(oneUrl)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n          \r\n\r\n          data.forEach(function (course) {\r\n            let name = course.name;\r\n            let code = course.code;\r\n            let syllabus = course.syllabus;\r\n            let progression = course.progression;\r\n\r\n            innermodal.innerHTML = `<section>\r\n    <h2><i class=\"fa fa-cog\"></i> Ändra kurs</h2>\r\n  \r\n   \r\n    <label >\r\n        Kursnamn: <br>\r\n        <input type=\"text\" name=\"nameedit\" id=\"nameedit\" value=\"${name}\" required/>\r\n    </label>\r\n     <label>\r\n        Kurskod: <br>\r\n        <input type=\"text\" name=\"codeedit\" id=\"codeedit\" value=\"${code}\" required/>\r\n    </label>\r\n    <label>\r\n        Progression: <br>\r\n        <select id=\"progressionedit\">\r\n            \r\n\r\n        <option value=\"A\">A</option>\r\n        <option value=\"B\">B</option>\r\n        <option value=\"C\">C</option>\r\n\r\n      </select>\r\n    </label>\r\n    <label >\r\n        Kursplan: <br>\r\n        <input type=\"text\" name=\"syllabusedit\" id=\"syllabusedit\" value=\"${syllabus}\" required/>\r\n    </label>\r\n    <input type=\"submit\" value=\"Ändra\" onclick=\"editCourse(${course.id})\"  id=\"editbutton\" class=\"btn btn-blue\">\r\n</section>`;\r\n\r\nlet select = document.getElementById('progressionedit');\r\n\r\nselect.value = progression;\r\n                  \r\n          })\r\n          \r\n      })\r\n    }\r\n\r\n\r\n    function deleteCourse(event) {\r\n        let id = event.target.id;\r\n\r\n\r\n        let deleteUrl = url + '/' + id;\r\n\r\n        console.log(deleteUrl);\r\n\r\n         fetch(deleteUrl, {\r\n             method: 'DELETE',\r\n           \r\n        }).then((res) => res.json())\r\n            .then((data) => location.reload(true))\r\n    }\r\n\r\n\r\n    function editCourse(id) {\r\n\r\n        console.log(id);\r\n        let code = document.getElementById(\"codeedit\").value;\r\n        let name = document.getElementById(\"nameedit\").value;\r\n        let progression = document.getElementById(\"progressionedit\").value;\r\n        let syllabus = document.getElementById(\"syllabusedit\").value;\r\n    \r\n       console.log(code, name, progression, syllabus);\r\n    \r\n            let jsonStr = JSON.stringify({\r\n                \"code\": code,\r\n                \"name\": name,\r\n                \"progression\": progression,\r\n                \"syllabus\": syllabus,\r\n                \"id\": id\r\n            });\r\n    \r\n    \r\n    console.log(jsonStr);\r\n            fetch(url, {\r\n                method: 'PUT',\r\n                mode: 'cors',\r\n               \r\n                body: jsonStr\r\n            }).then((res) => res.json())\r\n                .then((data) => location.reload(true))\r\n               \r\n        }\r\n        \r\n\r\n    "]}